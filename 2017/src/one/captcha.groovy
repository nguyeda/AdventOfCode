package one

static int captcha(String input, int compareToIndex = 1) {
  def sum = 0
  List<Integer> digits = input.chars.collect { Integer.parseUnsignedInt(it as String) }
  digits.eachWithIndex { current, index ->
    def leftOvers = digits.size() - index
    def nextIndex = leftOvers > compareToIndex ? index + compareToIndex : compareToIndex - leftOvers
    // println "index: $index, nextIndex: $nextIndex, currentSum: $sum"
    sum += (current == digits.get(nextIndex) ? current : 0)
  }
  return sum
}

static int calc(String input, Integer expected = null) {
  def c = captcha(input, 1)
  println "captcha for $input: $c" + ((expected == null) ? '' : " (expected: $expected)")
  return c
}

static int calc2(String input, Integer expected = null) {
  int n = input.length() / 2
  def c = captcha(input, n)
  println "captcha for $input: $c" + ((expected == null) ? '' : " (expected: $expected)")
  return c
}

def myInput = '525544371475555531777715244182678432191828599959422153163624294499836371611929484583' +
  '857994356254324723996955579177239268156788344983798211923953632534126352441539712382435846789196376294872' +
  '332777454571585154242983211917913991447152351533224731744171918455689136217926736832548664237668565775962' +
  '387685495872163657421987124964577373859775142995943746687616627375552487335145295141162847935252236771426' +
  '971851483893328386142598256285484547151265255563392287812855892612393594185853244637881592957345277534859' +
  '969398283469975773471418783133754647451567857715872175192156214559116663427969929941826915855755799658388' +
  '164246827461819633526734289749848686992526289612514686712459658798953149589164668152825962467479272814652' +
  '684971113914626879943633461897454753956158758126888644929181733523285939149383916711124637649319198514584' +
  '853182934419853656898799689422658583734837295895953596965157351654258114446253657495376441372314795723729' +
  '832445818129116758779171417267471789856726954776663614373243869447323147325845216645719479781942352813915' +
  '745214823694328337419356196339384638562221853595259158835356531943228557971188155934354451546196284687968' +
  '587943176796397565434756938535448222634126176854732874994716386464516842895344539636139887353643493182363' +
  '552246775478242255799826285829756386249265246452636617121827617625858244492349718177612943639639733397621' +
  '597673154218287897938936229715581946168536167641472559733575997628559771333268827524127166465828686869716' +
  '751532981183123432469834515994913547446362474962462651824783144814387618313381426397761156433986546632124' +
  '439917746482264961196989634487438197898645356697976291115593136239419266394352683414859634226832156388525' +
  '576561441814182893497192799899473976914178918516546197642515185584673995933864949937965722319688553938615' +
  '493558679454836586175935486545321172155177699757628981159565417167225912933524353151822828239332639524124' +
  '218579582826131921516426223795774323255897128914563985214819718426576629188525984723664661593596375963114' +
  '533815925753811435978185468569542934842888424897217727836135381476665399667599478419582721429546238953242' +
  '2825696456457332417366426619555'

calc('1122', 3)
calc('1111', 4)
calc('1234', 0)
calc('91212129', 9)
calc(myInput)

calc2('1212', 6)
calc2('1221', 0)
calc2('123425', 4)
calc2('123123', 12)
calc2('12131415', 4)
calc2(myInput)
